const fs = require('fs');
const path = require('path');
const https = require('https');
const { execSync } = require('child_process');
const { callClaude } = require('./api');

const CONFIG_FILE = path.join(__dirname, 'config.md');
const QUEUE_FILE = path.join(__dirname, 'topics-queue.md');
const TG_BOT_TOKEN = '8317320763:AAHgRTuPdzS3MKS9Bw3UztLaGjBiy9PsrEg';
const TG_CHAT_ID = '275175013';

const CTA = `–ó–ê–ë–ï–†–ò –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –ë–ê–ó–£ –º–æ–∏—Ö –ü–†–û–ú–¢–û–í chatGPT –¥–ª—è –±–ª–æ–≥–µ—Ä–æ–≤, —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤üëáüèª
–ü–æ–¥–ø–∏—Å–∫–∞ —Ç–≤–æ—è –Ω–µ –Ω—É–∂–Ω–∞, –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –∑–∞–±—Ä–∞—Ç—å –µ—ë —Ç—É—Ç üëâüèªhttps://t.me/ungurenko_adout_digital/1608`;

// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
async function sendTelegramMessage(message) {
  return new Promise((resolve) => {
    const text = encodeURIComponent(message);
    const url = `https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage?chat_id=${TG_CHAT_ID}&text=${text}`;
    https.get(url, (res) => {
      res.on('data', () => {});
      res.on('end', resolve);
    }).on('error', () => {
      console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å TG —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ');
      resolve();
    });
  });
}

// –ü–∞—Ä—Å–∏–º —Ç–µ–º—ã –∏–∑ —Ñ–∞–π–ª–∞ –æ—á–µ—Ä–µ–¥–∏
function parseTopicsFromQueue() {
  if (!fs.existsSync(QUEUE_FILE)) {
    return [];
  }
  const content = fs.readFileSync(QUEUE_FILE, 'utf8');
  const lines = content.split('\n');
  const topics = [];
  
  for (const line of lines) {
    const trimmed = line.trim();
    if (/^(\d+\.|\-)\s+.+/.test(trimmed) && !trimmed.includes('–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç')) {
      const topic = trimmed.replace(/^(\d+\.|\-)\s+/, '');
      topics.push(topic);
    }
  }
  
  return topics;
}

// –£–¥–∞–ª—è–µ–º –ø–µ—Ä–≤—É—é —Ç–µ–º—É –∏–∑ –æ—á–µ—Ä–µ–¥–∏
function removeFirstTopic() {
  const topics = parseTopicsFromQueue();
  if (topics.length === 0) return;
  
  const remaining = topics.slice(1);
  let content = '# Topics Queue\n<!-- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–º—ã —Å—é–¥–∞, –ø—É–±–ª–∏–∫–∞—Ç–æ—Ä –±–µ—Ä—ë—Ç –ø–µ—Ä–≤—É—é –∏ —É–¥–∞–ª—è–µ—Ç -->';
  
  for (let i = 0; i < remaining.length; i++) {
    content += `\n${i + 1}. ${remaining[i]}`;
  }
  
  fs.writeFileSync(QUEUE_FILE, content + '\n');
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ Claude API
async function generatePost(topic) {
  const prompt = `–¢—ã ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–π–∫–µ—Ä –¥–ª—è –±–ª–æ–≥–µ—Ä–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤. –ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç –¥–ª—è Threads –ø–æ —Ç–µ–º–µ: "${topic}"

–ê—É–¥–∏—Ç–æ—Ä–∏—è: —ç–∫—Å–ø–µ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥—É—Ç –±–ª–æ–≥ –∏ —Ö–æ—Ç—è—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ü–∏—à—É—Ç –ø–æ—Å—Ç—ã, —Å–Ω–∏–º–∞—é—Ç Reels, –ø—Ä–æ–¥–∞—é—Ç –∏–Ω—Ñ–æ–ø—Ä–æ–¥—É–∫—Ç—ã.

–°–¢–ò–õ–¨:
- –ñ–∏–≤–æ–π, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π, –æ–±—Ä–∞—â–µ–Ω–∏–µ "—Ç—ã"
- –ò—Å–ø–æ–ª—å–∑—É–π —Ç–∏—Ä–µ "‚Äî" –≤–º–µ—Å—Ç–æ –±—É–ª–ª–µ—Ç–æ–≤
- –ö–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞: —Ü–∏—Ñ—Ä—ã, –ø—Ä–∏–º–µ—Ä—ã, —Ä–æ–ª—å –¥–ª—è ChatGPT
- –ë–µ–∑ –≤–æ–¥—ã –∏ –æ–±—â–∏—Ö —Ñ—Ä–∞–∑

–§–û–†–ú–ê–¢ (—Å—Ç—Ä–æ–≥–æ 7-8 —á–∞—Å—Ç–µ–π, –∫–∞–∂–¥–∞—è –Ω–µ –±–æ–ª–µ–µ 500 —Å–∏–º–≤–æ–ª–æ–≤):

–ß–∞—Å—Ç—å 1: –ó–∞–≥–æ–ª–æ–≤–æ–∫-—Ö—É–∫ (—Ü–∏—Ñ—Ä–∞ + –±–æ–ª—å/–æ–±–µ—â–∞–Ω–∏–µ) ‚Äî —Å–∫–æ–ø–∏—Ä—É–π —Ç–µ–º—É –∏–ª–∏ —Å–¥–µ–ª–∞–π –µ—â—ë —Ü–µ–ø–ª—è—é—â–µ–π

–ß–∞—Å—Ç–∏ 2-6: –ü–æ–¥–±–æ—Ä–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è ChatGPT. –ö–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º:
‚Äî –î–∞–π —Ä–æ–ª—å (–∫—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç)
‚Äî –ß—Ç–æ –¥–µ–ª–∞—Ç—å (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞)
‚Äî 3-4 –ø—É–Ω–∫—Ç–∞ —á–µ—Ä–µ–∑ —Ç–∏—Ä–µ "‚Äî" —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏/—É—Å–ª–æ–≤–∏—è–º–∏

–ß–∞—Å—Ç—å 7: "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ" ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –∏—Ç–æ–≥ –≤ 2-3 –ø—É–Ω–∫—Ç–∞

–ß–∞—Å—Ç—å 8 (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CTA, —Å–∫–æ–ø–∏—Ä—É–π —Ç–æ—á–Ω–æ):
${CTA}

–í–µ—Ä–Ω–∏ –ø–æ—Å—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –≥–¥–µ –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å –æ—Ç–¥–µ–ª–µ–Ω–∞ –º–∞—Ä–∫–µ—Ä–æ–º "|||PART|||". –ü—Ä–∏–º–µ—Ä:

–ó–∞–≥–æ–ª–æ–≤–æ–∫-—Ö—É–∫ —Ç—É—Ç
|||PART|||
–ü—Ä–æ–º–ø—Ç 1 —Ç—É—Ç —Å —Ä–æ–ª—å—é, –∑–∞–¥–∞—á–µ–π, —Ç–∏—Ä–µ
|||PART|||
–ü—Ä–æ–º–ø—Ç 2 —Ç—É—Ç
|||PART|||
–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ...

–ù–ï –¥–æ–±–∞–≤–ª—è–π –Ω—É–º–µ—Ä–∞—Ü–∏—é —á–∞—Å—Ç–µ–π, –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª–∏ –∏—Ö –º–∞—Ä–∫–µ—Ä–æ–º |||PART|||.`;

  return await callClaude(prompt, 2000);
}

// –ü–∞—Ä—Å–∏–º –æ—Ç–≤–µ—Ç –≤ –º–∞—Å—Å–∏–≤ —á–∞—Å—Ç–µ–π
function parsePostContent(content) {
  const parts = content.split('|||PART|||').map(p => p.trim()).filter(p => p.length > 0);
  
  // –ï—Å–ª–∏ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–æ—Å—å –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º ‚Äî –ø—Ä–æ–±—É–µ–º –ø–æ –ø—É—Å—Ç—ã–º —Å—Ç—Ä–æ–∫–∞–º
  if (parts.length < 3) {
    return content.split('\n\n').map(p => p.trim()).filter(p => p.length > 10);
  }
  
  return parts;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
async function checkSession() {
  try {
    execSync('node ' + path.join(__dirname, 'check-session.js'), { 
      stdio: 'pipe', 
      timeout: 60000 
    });
    return true;
  } catch (e) {
    return false;
  }
}

// –ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ post.js
async function publishPost(parts) {
  const postModule = require('./post.js');
  await postModule.postToThreads(parts);
}

// –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç –¥–ª—è fallback
function getTestPost(topic) {
  return [
    topic,
    `–ü—Ä–æ–º–ø—Ç 1: –ö–æ–ø–∏—Ä–∞–π—Ç–µ—Ä-—ç–∫—Å–ø–µ—Ä—Ç

–†–æ–ª—å: –¢—ã ‚Äî –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä —Å 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –≤ –Ω–∏—à–µ [—É–∫–∞–∑–∞—Ç—å].
–ó–∞–¥–∞—á–∞: –ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç –æ [—Ç–µ–º–∞] –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–º —Å—Ç–∏–ª–µ.
‚Äî –ù–∞—á–Ω–∏ —Å –±–æ–ª–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
‚Äî –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚Äî –î–æ–±–∞–≤—å –ø—Ä–∏–º–µ—Ä –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏
‚Äî –ó–∞–∫–æ–Ω—á–∏ –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é`,
    `–ü—Ä–æ–º–ø—Ç 2: –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–†–æ–ª—å: –¢—ã ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç —Ç–µ–∫—Å—Ç—ã —Ü–µ–ø–ª—è—é—â–∏–º–∏.
–ó–∞–¥–∞—á–∞: –£–ª—É—á—à–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç: [–≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç]
‚Äî –£–±–µ—Ä–∏ –∫–∞–Ω—Ü–µ–ª—è—Ä–∏–∑–º—ã
‚Äî –î–æ–±–∞–≤—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
‚Äî –°–¥–µ–ª–∞–π 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
‚Äî –î–æ–±–∞–≤—å –±–ª–æ–∫ "—á—Ç–æ —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å"`,
    `–ü—Ä–æ–º–ø—Ç 3: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ö—É–∫–æ–≤

–†–æ–ª—å: –¢—ã ‚Äî —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –≤–∏—Ä—É—Å–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É.
–ó–∞–¥–∞—á–∞: –ü—Ä–∏–¥—É–º–∞–π 5 –∫—Ä—é—á–∫–æ–≤ –¥–ª—è [—Ç–µ–º–∞].
‚Äî –ò—Å–ø–æ–ª—å–∑—É–π —Ü–∏—Ñ—Ä—ã
‚Äî –î–æ–±–∞–≤—å –∏–Ω—Ç—Ä–∏–≥—É
‚Äî –û–±—Ä–∞—â–∞–π—Å—è –Ω–∞ "—Ç—ã"
‚Äî –û–±–µ—â–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç`,
    `–ü—Ä–æ–º–ø—Ç 4: –°—Ç–æ—Ä–∏—Ç–µ–ª–ª–µ—Ä

–†–æ–ª—å: –¢—ã ‚Äî –∞–≤—Ç–æ—Ä –±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä–æ–≤, –º–∞—Å—Ç–µ—Ä –∏—Å—Ç–æ—Ä–∏–π.
–ó–∞–¥–∞—á–∞: –ü—Ä–µ–≤—Ä–∞—Ç–∏ —Ñ–∞–∫—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é: [—Ñ–∞–∫—Ç]
‚Äî –ù–∞—á–Ω–∏ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
‚Äî –î–æ–±–∞–≤—å –¥–µ—Ç–∞–ª–∏ (–≤—Ä–µ–º—è, –º–µ—Å—Ç–æ, –ø–µ—Ä—Å–æ–Ω–∞–∂)
‚Äî –ü–æ–∫–∞–∂–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é
‚Äî –í—ã–≤–µ–¥–∏ –º–æ—Ä–∞–ª—å`,
    `–ü—Ä–æ–º–ø—Ç 5: SMM-—Å—Ç—Ä–∞—Ç–µ–≥

–†–æ–ª—å: –¢—ã ‚Äî SMM-—Å—Ç—Ä–∞—Ç–µ–≥ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø—Ä–æ–¥–∞–∂–∏.
–ó–∞–¥–∞—á–∞: –°–¥–µ–ª–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é –¥–ª—è [–Ω–∏—à–∞].
‚Äî 3 –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–∞
‚Äî 2 —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã—Ö
‚Äî 2 –ø—Ä–æ–¥–∞—é—â–∏—Ö
‚Äî –î–ª—è –∫–∞–∂–¥–æ–≥–æ ‚Äî –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç`,
    `–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:

‚Äî –í—ã–±–µ—Ä–∏ –æ–¥–Ω—É –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç)
‚Äî –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç —Å –Ω—É–∂–Ω–æ–π —Ä–æ–ª—å—é
‚Äî –î–æ–±–∞–≤—å —Å–≤–æ–∏ –¥–µ—Ç–∞–ª–∏ –≤ [—Å–∫–æ–±–∫–∞—Ö]
‚Äî –ü–æ–ª—É—á–∏ –≥–æ—Ç–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –¥–æ—Ä–∞–±–æ—Ç–∞–π –ø–æ–¥ —Å–µ–±—è`,
    CTA
  ];
}

// –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
async function main() {
  console.log('üìù Post Agent: –∑–∞–ø—É—Å–∫...');
  
  // –ß–∏—Ç–∞–µ–º –æ—á–µ—Ä–µ–¥—å
  const topics = parseTopicsFromQueue();
  console.log(`üìä –í –æ—á–µ—Ä–µ–¥–∏ ${topics.length} —Ç–µ–º`);
  
  if (topics.length === 0) {
    console.log('‚ö†Ô∏è –û—á–µ—Ä–µ–¥—å —Ç–µ–º –ø—É—Å—Ç–∞—è!');
    await sendTelegramMessage('‚ö†Ô∏è –û—á–µ—Ä–µ–¥—å —Ç–µ–º –ø—É—Å—Ç–∞—è! –ó–∞–ø—É—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.');
    process.exit(1);
  }
  
  const topic = topics[0];
  console.log(`üéØ –¢–µ–º–∞: ${topic}`);
  
  try {
    let parts;
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—Å—Ç —á–µ—Ä–µ–∑ OpenClaw gateway (api.js)
    try {
      console.log('ü§ñ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ—Å—Ç —á–µ—Ä–µ–∑ Claude API...');
      const rawContent = await generatePost(topic);
      parts = parsePostContent(rawContent);
      if (parts.length < 3) {
        console.log('‚ö†Ô∏è –ú–∞–ª–æ —á–∞—Å—Ç–µ–π –≤ –æ—Ç–≤–µ—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—é —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç');
        parts = getTestPost(topic);
      }
    } catch (e) {
      console.log(`‚ö†Ô∏è –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (${e.message}), –∏—Å–ø–æ–ª—å–∑—É—é —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç`);
      parts = getTestPost(topic);
    }
    
    console.log(`‚úÖ –ü–æ—Å—Ç –≥–æ—Ç–æ–≤, —á–∞—Å—Ç–µ–π: ${parts.length}`);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Å—Å–∏—é
    console.log('üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å–µ—Å—Å–∏—é...');
    const sessionOk = await checkSession();
    if (!sessionOk) {
      console.error('‚ùå –°–µ—Å—Å–∏—è –º–µ—Ä—Ç–≤–∞, –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞');
      process.exit(1);
    }
    console.log('‚úÖ –°–µ—Å—Å–∏—è –∂–∏–≤–∞—è');
    
    // –ü—É–±–ª–∏–∫—É–µ–º
    console.log('üì§ –ü—É–±–ª–∏–∫—É—é –≤ Threads...');
    await publishPost(parts);
    console.log('‚úÖ –ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!');
    
    // –£–¥–∞–ª—è–µ–º —Ç–µ–º—É –∏–∑ –æ—á–µ—Ä–µ–¥–∏
    removeFirstTopic();
    console.log('üóëÔ∏è –¢–µ–º–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –æ—á–µ—Ä–µ–¥–∏');
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—á—ë—Ç
    const preview = parts[0]?.substring(0, 200) || topic;
    await sendTelegramMessage(`‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –≤ Threads!\n\n–ó–∞–≥–æ–ª–æ–≤–æ–∫: ${topic}\n\n–ü–æ—Å—Ç:\n${preview}...`);
    console.log('üì± TG –æ—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞:', error.message);
    await sendTelegramMessage(`‚ùå Post Agent: –æ—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏\n\n${error.message}`);
    process.exit(1);
  }
}

main();
