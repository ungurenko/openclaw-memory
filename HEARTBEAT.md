# HEARTBEAT.md - Heartbeat Instructions

## Режим работы
Heartbeat срабатывает каждые ~30-60 минут.

## Что проверять

### 1. Напоминания про важные даты
- Проверяю файлы MEMORY.md и memory/YYYY-MM-DD.md на записанные дедлайны/события
- Напоминаю заранее (за 2-4 часа до события, если указано время)
- Напоминаю за 1 день до дедлайна (если только дата)

### 2. Проектные задачи
- Если в памяти есть явные следующие шаги по ВАЙБС или другим проектам → напоминаю
- **Проверка "зависших" задач:** если задача ждет ввода от Александра > 12 часов → напоминаю.

### 3. Тихие часы
- 23:00–07:00 (Мск) — не беспокою, кроме критичного
- Если heartbeat попадает в тихие часы → HEARTBEAT_OK

### 4. Обновление памяти
- **Каждые 2-4 heartbeat (примерно раз в 2-4 часа):** обновляю `memory/recent-context.md`
- **Ежедневно в 21:00-22:00 (Мск):** запуск системы саморефлексии (см. `docs/reflection-system.md`). Создаю отчет и отправляю Александру.

### 4b. Мониторинг инфраструктуры
- Раз в день проверяю логи Exa MCP health-check
- Если есть критические ошибки → сообщаю Александру
- **Мониторинг Макса (AI News Bot):** во время heartbeat после 10:00, 16:00 и 22:00 (Мск) проверяю `/root/.openclaw/workspace-ai-news-bot/memory/posts-log.md`. Если за последние 2 часа не было нового поста → пингую Макса в его сессию или сообщаю Александру.

### 5. Что НЕ делаю
- НЕ проверяю почту (спам)
- НЕ проверяю календарь (нет доступа)
- НЕ выдумываю задачи из головы — только то, что записано в памяти

### 6. Обновление active-tasks.md
- **Каждый heartbeat:** проверяю, нужно ли обновить active-tasks.md
- Если есть изменения в текущих задачах → обновляю файл
- Если задача завершена → переношу в архив (daily log)

### 7. Гигиена памяти (раз в неделю, по воскресеньям)
- Удаляю daily logs старше 7 дней из memory/
- НЕ удаляю: active-tasks.md, recent-context.md, next-tasks.md, important-dates.md, mistakes.md, ai-models-tracker.md, ai-news-buffer.md
- Перед удалением: проверяю, что важное перенесено в MEMORY.md
- Показываю список удалённых файлов

## Когда молчу
Если проверил всё и ничего не требует внимания → отвечаю: HEARTBEAT_OK

## Когда реагирую
- Скоро важное событие (эфир, встреча, дедлайн)
- Есть незавершённое обещание/задача, о которой Александр мог забыть
- Критичная информация в файлах workspace
